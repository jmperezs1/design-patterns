import type { CodeSnippet } from '../../../registry/types';

export const mementoCodeSnippets: CodeSnippet[] = [
  { title: 'originator.ts', language: 'ts', code: `import { EditorMemento } from './memento';\nexport class EditorOriginator {\n  private text = '';\n  setText(t: string) { this.text = t; }\n  getText() { return this.text; }\n  createMemento(): EditorMemento { return new EditorMemento(this.text); }\n  setMemento(m: EditorMemento) { this.text = m.getState().text; }\n}` },
  { title: 'memento.ts', language: 'ts', code: `export class EditorMemento {\n  readonly text: string; readonly createdAt: Date;\n  constructor(text: string, createdAt = new Date()) { this.text = text; this.createdAt = createdAt; }\n  getState() { return { text: this.text, createdAt: this.createdAt }; }\n}` },
  { title: 'care-taker.ts', language: 'ts', code: `import { EditorMemento } from './memento';\nimport { EditorOriginator } from './originator';\nexport class EditorCaretaker {\n  private originator: EditorOriginator;\n  private undoStack: EditorMemento[] = [];\n  private redoStack: EditorMemento[] = [];\n  constructor(originator: EditorOriginator) { this.originator = originator; this.checkpoint('Initial'); }\n  checkpoint(_label?: string) { this.undoStack.push(this.originator.createMemento()); this.redoStack = []; }\n  canUndo() { return this.undoStack.length > 1; }\n  canRedo() { return this.redoStack.length > 0; }\n  undo() { if (!this.canUndo()) return; const current = this.undoStack.pop()!; this.redoStack.push(current); const previous = this.undoStack[this.undoStack.length - 1]; this.originator.setMemento(previous); }\n  redo() { if (!this.canRedo()) return; const next = this.redoStack.pop()!; this.undoStack.push(next); this.originator.setMemento(next); }\n  history() { return this.undoStack.map(m => m.getState()); }\n}` },
];
