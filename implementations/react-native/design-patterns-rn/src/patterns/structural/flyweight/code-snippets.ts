import type { CodeSnippet } from '../../../registry/types';

export const flyweightCodeSnippets: CodeSnippet[] = [
  { title: 'flyweight-interface.ts', language: 'ts', code: `import type { ReactElement } from 'react';\n\nexport interface FlyweightBadge {\n  operation(extrinsic: { text: string; x: number; y: number; color: string }): ReactElement;\n}` },
  { title: 'concrete-flyweight.tsx', language: 'tsx', code: `import React from 'react';\nimport { View, Text } from 'react-native';\nimport type { FlyweightBadge } from './flyweight-interface';\n\nexport class BadgeFlyweight implements FlyweightBadge {\n  private intrinsic: {\n    borderRadius: number;\n    paddingHorizontal: number;\n    paddingVertical: number;\n    borderWidth?: number;\n    borderColor?: string;\n    background?: string;\n    fontSize: number;\n    fontWeight: '400' | '500' | '600' | '700';\n  };\n  constructor(intrinsic: { borderRadius: number; paddingHorizontal: number; paddingVertical: number; borderWidth?: number; borderColor?: string; background?: string; fontSize: number; fontWeight: '400' | '500' | '600' | '700'; }) {\n    this.intrinsic = intrinsic;\n  }\n  operation({ text, x, y, color }: { text: string; x: number; y: number; color: string }) {\n    const style: any = { position: 'absolute', left: x, top: y, backgroundColor: this.intrinsic.background ?? 'transparent', borderRadius: this.intrinsic.borderRadius, paddingHorizontal: this.intrinsic.paddingHorizontal, paddingVertical: this.intrinsic.paddingVertical, borderWidth: this.intrinsic.borderWidth ?? 0, borderColor: this.intrinsic.borderColor ?? 'transparent' };\n    const textStyle: any = { color, fontSize: this.intrinsic.fontSize, fontWeight: this.intrinsic.fontWeight as any };\n    return ( <View key={\`${'${'}text}-${'${'}x}-${'${'}y}\`} style={style} pointerEvents="none"><Text style={textStyle}>{text}</Text></View> );\n  }\n}` },
  { title: 'flyweight-factory.ts', language: 'ts', code: `import { BadgeFlyweight } from './concrete-flyweight';\nimport type { FlyweightBadge } from './flyweight-interface';\n\nexport class BadgeFactory {\n  private cache = new Map<string, FlyweightBadge>();\n  get(key: string): FlyweightBadge {\n    if (!this.cache.has(key)) { this.cache.set(key, this.create(key)); }\n    return this.cache.get(key)!;\n  }\n  size() { return this.cache.size; }\n  private create(key: string): FlyweightBadge {\n    switch (key) {\n      case 'pill': return new BadgeFlyweight({ borderRadius: 999, paddingHorizontal: 8, paddingVertical: 2, background: '#111', fontSize: 12, fontWeight: '600' });\n      case 'rounded-outline': return new BadgeFlyweight({ borderRadius: 8, paddingHorizontal: 8, paddingVertical: 2, borderWidth: 1, borderColor: '#333', background: '#fff', fontSize: 12, fontWeight: '600' });\n      case 'chip':\n      default: return new BadgeFlyweight({ borderRadius: 14, paddingHorizontal: 10, paddingVertical: 0, background: '#f5f5f5', fontSize: 12, fontWeight: '500' });\n    }\n  }\n}` },
];
